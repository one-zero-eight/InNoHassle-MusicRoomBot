version: "3"

services:
  bot:
    build:
      dockerfile: ./deploy/Dockerfile
      context: .
    depends_on:
      - redis
    restart: always
    volumes:
      - ./settings.yaml:/code/settings.yaml
    environment:
      - TZ=Europe/Moscow
    networks:
      - default
      - music-room

  redis:
    build: ./redis
    restart: always
    volumes:
      - redis:/data

networks:
  music-room:
    external: true
    name: music-room

volumes:
  redis:
